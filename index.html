<!doctype html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Mondo API Reference</title>

    <meta property="og:title" content="Mondo API Reference" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="The Mondo API is designed to be a predictable and intuitive interface for interacting with users' accounts. We offer both a REST API and webhooks." />

    <link href="stylesheets/screen-35298d9c.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print-32bbdc25.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch-a0d041e4.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <span class="logo"><a href="https://getmondo.co.uk"><img src="images/logo-6cef8dc1.svg" /></a></span>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<blockquote>
<p><strong>API endpoint</strong></p>
</blockquote>
<pre class="highlight plaintext"><code>https://api.getmondo.co.uk
</code></pre>

<blockquote>
<p>Examples in this documentation are written using <a href="https://github.com/jkbrzt/httpie">httpie</a> for clarity.</p>

<p>To install <code class="prettyprint">httpie</code> on OS X run <code class="prettyprint">brew install httpie</code></p>
</blockquote>

<p>The Mondo API is designed to be a predictable and intuitive interface for interacting with users&rsquo; accounts. We offer both a REST API and webhooks.</p>

<p>Our developers&rsquo; community in Slack is the place to get help with our API, discuss ideas, and show off what you build. Hit the button to join:</p>

<script async defer src="https://devslack.getmondo.co.uk/slackin.js"></script>

<aside class="notice">
The Mondo API is currently in beta, and is under active development. You should expect breaking changes to be introduced.
</aside>

          <h1 id="authentication">Authentication</h1>

<p>The Mondo API implements <a href="http://oauth.net/2/">OAuth 2.0</a>, a protocol that lets external apps request authorization to private details in a Mondo user&rsquo;s account without obtaining their password. This also lets users revoke permission to authorized apps at any time, and in time will allow more granular access to their data.</p>

<p>Before getting started developers need to create a client (application) in the <a href="https://developers.getmondo.co.uk">Mondo Developer Portal</a>. This will generate a unique client ID and secret which can be used to authorize yourself and other users to your application.</p>

<aside class="warning">
The client secret must not be shared.
</aside>

<p>Mondo&rsquo;s OAuth implementation supports the standard <a href="https://tools.ietf.org/html/rfc6749#section-4.1">Authorization Code Grant</a> type. Developers should implement the web application flow described below to obtain an authorization code and then exchange it for an access token.</p>

<h2 id="web-application-flow-authorization-code-grant">Web application flow (Authorization Code Grant)</h2>

<p>The Web Application Flow allows your app to request access to private details in another user&rsquo;s Mondo account, without requesting their password. This three step process is often referred to as three-legged authorization, and consists of the following steps:</p>

<ol>
<li><a href="#redirect-the-user-to-mondo">Redirect the user</a> to Mondo where they can authorize your application</li>
<li><a href="#mondo-redirects-back-to-your-app">Mondo redirects the user</a> back to your app with an authorization code</li>
<li><a href="#exchange-the-authorization-code">Exchange the authorization code</a> for an access token</li>
</ol>

<h3 id="redirect-the-user-to-mondo">Redirect the user to Mondo</h3>
<pre class="highlight shell"><code><span class="c"># Your App redirects the web browser to Mondo:</span>
<span class="s2">"https://auth.getmondo.co.uk/?client_id=oauthclient_000094QU2tSWpTkuaEhnPd&amp;redirect_uri=http://your.example.com/oauth/callback&amp;response_type=code&amp;state=jjHwiXGC7zSIa0sUhN0U"</span>
</code></pre>

<p>The first step in the authorization process is redirecting the user to Mondo where they can log in and grant access to your application.</p>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">client_id</code><br><span class="label notice">Required</span></td>
<td>The client ID you received from Mondo.</td>
</tr>
<tr>
<td><code class="prettyprint">redirect_uri</code><br><span class="label notice">Required</span></td>
<td>The URL in your app where users will be sent after authorization.</td>
</tr>
<tr>
<td><code class="prettyprint">response_type</code><br><span class="label notice">Required</span></td>
<td>This must be set to <code class="prettyprint">code</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">state</code></td>
<td>An unguessable random string which is used to protect against cross-site request forgery attacks.</td>
</tr>
</tbody></table>

<h3 id="mondo-redirects-back-to-your-app">Mondo redirects back to your app</h3>
<pre class="highlight shell"><code><span class="c"># Mondo redirects the web browser back to your App:</span>
<span class="s2">"http://your.example.com/oauth/callback?code=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5NFFVMnRTV3BUa3VhRWhuUGQiLCJleHAiOjE0NTM0OTY0MDAsImlhdCI6MTQ1MzQ5NTgwMCwianRpIjoiYXV0aGNvZGVfMDAwMDk0UVV2c084Vm9vSkJucnZNMSIsInVpIjoidXNlcl8wMDAwOTRNNU5ZMzJNODlEdXRhajlHIiwidiI6IjEifQ.YnrvzKPQDvStchGDMjpIvUa-SE-Br0koWZqFxFS4QDQ&amp;state=jjHwiXGC7zSIa0sUhN0U"</span>
</code></pre>

<p>If the user accepts your request, Mondo redirects back to your app with a temporary code in the <code class="prettyprint">code</code> parameter as well as the state you provided in the previous step in the <code class="prettyprint">state</code> parameter. If the states don&rsquo;t match, the request may have been tampered with, and the process should be aborted.</p>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">code</code></td>
<td>The authorization code which can be exchanged for an access token.</td>
</tr>
<tr>
<td><code class="prettyprint">state</code></td>
<td>An unguessable random string which is used to protect against cross-site request forgery attacks, which you provided when redirecting to Mondo.</td>
</tr>
</tbody></table>

<h3 id="exchange-the-authorization-code">Exchange the authorization code</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/oauth2/token"</span> <span class="se">\</span>
    <span class="s2">"grant_type=authorization_code"</span> <span class="se">\</span>
    <span class="s2">"client_id=oauthclient_000094QU2tSWpTkuaEhnPd"</span> <span class="se">\</span>
    <span class="s2">"client_secret=s9P2eXmMMbjH+g/TrMIYdQc5oxs7Lv4wOZrtntLXvoVlMvdAauQF/4f8a0zxF+YKTmuQlG2xoGHaZqG/uIyr"</span> <span class="se">\</span>
    <span class="s2">"redirect_uri=http://your.example.com/oauth/callback"</span> <span class="se">\</span>
    <span class="s2">"code=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5NFFVMnRTV3BUa3VhRWhuUGQiLCJleHAiOjE0NTM0OTY0MDAsImlhdCI6MTQ1MzQ5NTgwMCwianRpIjoiYXV0aGNvZGVfMDAwMDk0UVV2c084Vm9vSkJucnZNMSIsInVpIjoidXNlcl8wMDAwOTRNNU5ZMzJNODlEdXRhajlHIiwidiI6IjEifQ.YnrvzKPQDvStchGDMjpIvUa-SE-Br0koWZqFxFS4QDQ"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjaSI6Im9hdXRoY2xpZW50XzAwMDA5NFFYUGJYdnRXbmZZQ2twTUgiLCJleHAiOjE0NTM2NzAzNDksImlhdCI6MTQ1MzQ5NzU0OSwianRpIjoidG9rXzAwMDA5NFFYWDlBTklLMjdxZktjYzUiLCJ1aSI6InVzZXJfMDAwMDk0TTVOWTMyTTg5RHV0YWo5RyIsInYiOiIxIn0.SEhPOg86PmbAwbz4BadK6_UUB36IVL77TfaGeg96WEc"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oauthclient_000094QU2tSWpTkuaEhnPd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">172799</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhaSI6InRva18wMDAwOTRRWFg5QU5JSzI3cWZLY2M1IiwiY2kiOiJvYXV0aGNsaWVudF8wMDAwOTRRWFBiWHZ0V25mWUNrcE1IIiwiaWF0IjoxNDUzNDk3NTQ5LCJ1aSI6InVzZXJfMDAwMDk0TTVOWTMyTTg5RHV0YWo5RyIsInYiOiIxIn0.0cEnNEYLeBT5F2eT58DqRnwK-iVCk3c2YAEn9uAod28"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_000094M5NY32M89Dutaj9G"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Once an authorization code is received this can be exchanged by your application for an access token. An access token is tied to both your application (the client) and an individual Mondo user and is valid for several hours.</p>

<aside class="notice">
Your client may only have <em>one</em> active access token at a time, per user. Acquiring a new access token will invalidate any other token you own for that user.
</aside>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">grant_type</code><br><span class="label notice">Required</span></td>
<td>This must be set to <code class="prettyprint">authorization_code</code></td>
</tr>
<tr>
<td><code class="prettyprint">client_id</code><br><span class="label notice">Required</span></td>
<td>The client ID you received from Mondo.</td>
</tr>
<tr>
<td><code class="prettyprint">client_secret</code><br><span class="label notice">Required</span></td>
<td>The client secret which you received from Mondo.</td>
</tr>
<tr>
<td><code class="prettyprint">redirect_uri</code><br><span class="label notice">Required</span></td>
<td>The URL in your app where users were sent after authorization.</td>
</tr>
<tr>
<td><code class="prettyprint">code</code><br><span class="label notice">Required</span></td>
<td>The authorization code you received when the user was redirected back to your app.</td>
</tr>
</tbody></table>

<h2 id="password-grant">Password Grant</h2>

<p>Using the password grant involves:</p>

<ol>
<li><a href="#acquiring-an-access-token">Acquiring</a> an access token.</li>
<li><a href="#authenticating-requests">Using</a> the access token to make authenticated requests.</li>
<li><a href="#refreshing-access">Refreshing</a> the access token when it expires.</li>
</ol>

<aside class="warning">
The Password Grant flow can only be used to access your own account. Use the <a href="#web-application-flow-authorization-code-grant">Authorization Code Grant</a> to request access to another Mondo user&rsquo;s account.
</aside>

<h3 id="acquiring-an-access-token">Acquiring an access token</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/oauth2/token"</span> <span class="se">\</span>
    <span class="s2">"grant_type=password"</span> <span class="se">\</span>
    <span class="s2">"client_id=</span><span class="nv">$client_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"client_secret=</span><span class="nv">$client_secret</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"username=</span><span class="nv">$user_email</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"password=</span><span class="nv">$user_password</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">21600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>An access token is tied to both your application (the client) and an individual Mondo user and is valid for several hours.</p>

<aside class="notice">
Your client may only have <em>one</em> active access token at a time, per user. Acquiring a new access token will invalidate any other token you own for that user.
</aside>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">grant_type</code><br><span class="label notice">Required</span></td>
<td>Should be <code class="prettyprint">password</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">client_id</code><br><span class="label notice">Required</span></td>
<td>Your client ID.</td>
</tr>
<tr>
<td><code class="prettyprint">client_secret</code><br><span class="label notice">Required</span></td>
<td>Your client secret.</td>
</tr>
<tr>
<td><code class="prettyprint">username</code><br><span class="label notice">Required</span></td>
<td>The user&rsquo;s email address.</td>
</tr>
<tr>
<td><code class="prettyprint">password</code><br><span class="label notice">Required</span></td>
<td>The user&rsquo;s password.</td>
</tr>
</tbody></table>

<h2 id="authenticating-requests">Authenticating requests</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/ping/whoami"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"authenticated"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>All</strong> requests must be authenticated with an access token. It is supplied in the <code class="prettyprint">Authorization</code> header using the <code class="prettyprint">Bearer</code> scheme.</p>

<p>To get information about an access token, you can call the <code class="prettyprint">/ping/whoami</code> endpoint.</p>

<h2 id="refreshing-access">Refreshing access</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/oauth2/token"</span> <span class="se">\</span>
    <span class="s2">"grant_type=refresh_token"</span> <span class="se">\</span>
    <span class="s2">"client_id=</span><span class="nv">$client_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"client_secret=</span><span class="nv">$client_secret</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"refresh_token=</span><span class="nv">$refresh_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_token_2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_id"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">21600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refresh_token_2"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To limit the window of opportunity for attackers in the event an access token is compromised, access tokens expire after a number of hours. To gain long-lived access to a user&rsquo;s account, it&rsquo;s necessary to &ldquo;refresh&rdquo; your access when it expires using a refresh token. Only <a href="https://tools.ietf.org/html/rfc6749#section-2.1">&ldquo;confidential&rdquo; clients</a> are issued refresh tokens ‚Äì¬†&ldquo;public&rdquo; clients must ask the user to re-authenticate.</p>

<p>Refreshing an access token will invalidate the previous token, if it is still valid. Refreshing is a one-time operation.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">grant_type</code><br><span class="label notice">Required</span></td>
<td>Should be <code class="prettyprint">refresh_token</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">client_id</code><br><span class="label notice">Required</span></td>
<td>Your client ID.</td>
</tr>
<tr>
<td><code class="prettyprint">client_secret</code><br><span class="label notice">Required</span></td>
<td>Your client secret.</td>
</tr>
<tr>
<td><code class="prettyprint">refresh_token</code><br><span class="label notice">Required</span></td>
<td>The refresh token received along with the original access token.</td>
</tr>
</tbody></table>

          <h1 id="pagination">Pagination</h1>

<p>Endpoints which enumerate objects support time-based and cursor-based pagination.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">limit</code><br><span class="label">Optional</span></td>
<td>Limits the number of results per-page.<br>Max: 100.</td>
</tr>
<tr>
<td><code class="prettyprint">since</code><br><span class="label">Optional</span></td>
<td>An RFC 3339-encoded timestamp.<br> eg.<code class="prettyprint">2009-11-10T23:00:00Z</code><br><br>Or an object id.<br>eg. <code class="prettyprint">tx_00008zhJ3kE6c8kmsGUKgn</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">before</code><br><span class="label">Optional</span></td>
<td>An RFC 3339 encoded-timestamp<br><code class="prettyprint">2009-11-10T23:00:00Z</code></td>
</tr>
</tbody></table>

          <h1 id="expanding-objects">Expanding objects</h1>

<p>Some objects contain the id of another object in their response. To save a round-trip, some of these objects can be expanded inline with the <code class="prettyprint">expand[]</code> parameter, which is repeatable. Objects that can be expanded are noted in individual endpoint documentation.</p>

          <h1 id="accounts">Accounts</h1>

<p>Accounts represent a store of funds, and have a list of transactions.</p>

<h2 id="list-accounts">List accounts</h2>

<p>Returns a list of accounts owned by the currently authorised user.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/accounts"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"accounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acc_00009237aqC8c5umZmrRdh"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Peter Pan's Account"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-13T12:17:42Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

          <h1 id="balance">Balance</h1>

<p>Retrieve information about an account&rsquo;s balance.</p>

<h2 id="read-balance">Read balance</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/balance?account_id=</span><span class="nv">$account_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"spend_today"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns balance information for a specific account.</p>

<h5 id="request-parameters">Request Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">account_id</code><br><span class="label notice">Required</span></td>
<td>The id of the account.</td>
</tr>
</tbody></table>

<h5 id="response-parameters">Response Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">balance</code></td>
<td>The currently available balance of the account, as a 64bit integer in minor units of the currency, eg. pennies for GBP, or cents for EUR and USD.</td>
</tr>
<tr>
<td><code class="prettyprint">currency</code></td>
<td>The ISO 4217 currency code.</td>
</tr>
<tr>
<td><code class="prettyprint">spend_today</code></td>
<td>The amount spent from this account today (considered from approx 4am onwards), as a 64bit integer in minor units of the currency.</td>
</tr>
</tbody></table>

          <h1 id="transactions">Transactions</h1>

<p>Transactions are movements of funds into or out of an account. Negative transactions represent debits (ie. <em>spending</em> money) and positive transactions represent credits (ie. <em>receiving</em> money).</p>

<p>Most properties on transactions are self-explanatory. We&rsquo;ll eventually get around to documenting them all, but in the meantime
let&rsquo;s discuss the most interesting/confusing ones:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Explanation</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>The amount of the transaction in minor units of <code class="prettyprint">currency</code>. For example pennies in the case of GBP. A negative amount indicates a debit (most card transactions will have a negative amount)</td>
</tr>
<tr>
<td><code class="prettyprint">decline_reason</code></td>
<td><strong>This is only present on declined transactions!</strong> Valid values are <code class="prettyprint">INSUFFICIENT_FUNDS</code>, <code class="prettyprint">CARD_INACTIVE</code>, <code class="prettyprint">CARD_BLOCKED</code> or <code class="prettyprint">OTHER</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">is_load</code></td>
<td>Top-ups to an account are represented as transactions with a positive amount and <code class="prettyprint">is_load = true</code>. Other transactions such as refunds, reversals or chargebacks may have a positive amount but <code class="prettyprint">is_load = false</code></td>
</tr>
<tr>
<td><code class="prettyprint">settled</code></td>
<td>You probably don&rsquo;t need to worry about this. Card transactions only settle 24-48 hours (sometimes even more!) after the purchase; until then they are just &ldquo;authorised&rdquo; and <code class="prettyprint">settled = false</code> on them.</td>
</tr>
<tr>
<td><code class="prettyprint">category</code></td>
<td>The category can be set for each transaction by the user. Over time we learn which merchant goes in which category and auto-assign the category of a transaction. If the user hasn&rsquo;t set a category, we&rsquo;ll return the default category of the merchant on this transactions. Top-ups have category &ldquo;mondo&rdquo;. Valid values are <code class="prettyprint">general</code>, <code class="prettyprint">eating_out</code>, <code class="prettyprint">expenses</code>, <code class="prettyprint">transport</code>, <code class="prettyprint">cash</code>, <code class="prettyprint">bills</code>, <code class="prettyprint">entertainment</code>, <code class="prettyprint">shopping</code>, <code class="prettyprint">holidays</code>, <code class="prettyprint">groceries</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">merchant</code></td>
<td>This contains the <code class="prettyprint">merchant_id</code> of the merchant that this transaction was made at. If you pass <code class="prettyprint">?expand[]=merchant</code> in your request URL, it will contain lots of information about the merchant.</td>
</tr>
</tbody></table>

<h2 id="retrieve-transaction">Retrieve transaction</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/transactions/</span><span class="nv">$transaction_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="c"># Here we are expanding the merchant \</span>
    <span class="s2">"expand[]=merchant"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"account_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">13013</span><span class="p">,</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-510</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22T12:20:18Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THE DE BEAUVOIR DELI C LONDON        GBR"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zIcpb1TB4yeIFXMzx"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98 Southgate Road"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.54151</span><span class="p">,</span><span class="w">
                </span><span class="nt">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.08482400000002599</span><span class="p">,</span><span class="w">
                </span><span class="nt">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N1 3JD"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Greater London"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22T12:20:18Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"group_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grp_00008zIcpbBOaAr7TTP3sv"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merch_00008zIcpbAKe8shBxXUtl"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pbs.twimg.com/profile_images/527043602623389696/68_SgUWJ.jpeg"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"emoji"</span><span class="p">:</span><span class="w"> </span><span class="s2">"üçû"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The De Beauvoir Deli Co."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Salmon sandwich üçû"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"is_load"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"settled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns an individual transaction, fetched by its id.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><a href="#expanding-objects"><code class="prettyprint">expand[]</code></a><br><span class="label">Repeated</span></td>
<td>Can be <code class="prettyprint">merchant</code>.</td>
</tr>
</tbody></table>

<h2 id="list-transactions">List transactions</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/transactions"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"account_id==</span><span class="nv">$account_id</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">13013</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-510</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22T12:20:18Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THE DE BEAUVOIR DELI C LONDON        GBR"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zIcpb1TB4yeIFXMzx"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merch_00008zIcpbAKe8shBxXUtl"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Salmon sandwich üçû"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"is_load"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"settled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">12334</span><span class="p">,</span><span class="w">
            </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-679</span><span class="p">,</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-23T16:15:03Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VUE BSL LTD            ISLINGTON     GBR"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zL2INM3xZ41THuRF3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merch_00008z6uFVhVBcaZzSQwCX"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nt">"is_load"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"settled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="w">
        </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a list of transactions on the user&rsquo;s account.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">account_id</code><br><span class="label notice">Required</span></td>
<td>The account to retrieve transactions from.</td>
</tr>
<tr>
<td>Pagination<br><span class="label">Optional</span></td>
<td>This endpoint can be <a href="#pagination">paginated</a>.</td>
</tr>
</tbody></table>

<h2 id="annotate-transaction">Annotate transaction</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http PATCH <span class="s2">"https://api.getmondo.co.uk/transactions/</span><span class="nv">$transaction_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"metadata[</span><span class="nv">$key1</span><span class="s2">]=</span><span class="nv">$value1</span><span class="s2">"</span> <span class="se">\</span>
    <span class="c">#¬†Set a key's value as empty to delete it</span>
    <span class="s2">"metadata[</span><span class="nv">$key2</span><span class="s2">]="</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"account_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">12334</span><span class="p">,</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-679</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-23T16:15:03Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VUE BSL LTD            ISLINGTON     GBR"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zL2INM3xZ41THuRF3"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merch_00008z6uFVhVBcaZzSQwCX"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nt">"is_load"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"settled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>You may store your own key-value annotations against a transaction in its <code class="prettyprint">metadata</code>.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">metadata[$name]</code><br><span class="label">Repeated</span></td>
<td>Include each key you would like to modify. To delete a key, set its value to an empty string.</td>
</tr>
</tbody></table>

<aside class="notice">
Metadata is private to your application.
</aside>

          <h1 id="feed-items">Feed items</h1>

<p>The Mondo app is organised around the feed ‚Äì¬†a reverse-chronological stream of events. Transactions are one such feed item, and your application can create its own feed items to surface relevant information to the user.</p>

<p>It&rsquo;s important to keep a few principals in mind when creating feed items:</p>

<ol>
<li>Feed items are <em>discrete</em> events that happen at a <em>point in time</em>.</li>
<li>Because of their prominence within the Mondo app, feed items should contain information of <em>high value</em>.</li>
<li>While the appearance of feed items can be customised, care should be taken to match the style of the Mondo app so that your feed items feel part of the experience.</li>
</ol>

<h2 id="create-feed-item">Create feed item</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/feed"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"account_id=</span><span class="nv">$account_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"type=basic"</span> <span class="se">\</span>
    <span class="s2">"url=https://www.example.com/a_page_to_open_on_tap.html"</span> <span class="se">\</span>
    <span class="s2">"params[title]=My custom item"</span> <span class="se">\</span>
    <span class="s2">"params[image_url]=www.example.com/image.png"</span> <span class="se">\</span>
    <span class="s2">"params[background_color]=#FCF1EE"</span> <span class="se">\</span>
    <span class="s2">"params[body_color]=#FCF1EE"</span> <span class="se">\</span>
    <span class="s2">"params[title_color]=#333"</span> <span class="se">\</span>
    <span class="s2">"params[body]=Some body text to display"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{}</span><span class="w">
</span></code></pre>

<p>Creates a new feed item on the user&rsquo;s feed</p>

<h5 id="general-arguments-for-all-types-of-feed-item">General Arguments (for all types of feed item)</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">account_id</code><br><span class="label notice">Required</span></td>
<td>The account to create feed item for.</td>
</tr>
<tr>
<td><code class="prettyprint">type</code><br><span class="label notice">Required</span></td>
<td>Type of feed item. Currently only <code class="prettyprint">basic</code> is supported.</td>
</tr>
<tr>
<td><code class="prettyprint">params</code><br><span class="label notice">Required</span></td>
<td>A <em>map</em> of parameters which vary based on <code class="prettyprint">type</code></td>
</tr>
<tr>
<td><code class="prettyprint">url</code><br><span class="label">Optional</span></td>
<td>A URL to open when the feed item is tapped. If no URL is provided, the app will display a fallback view based on the title &amp; body.</td>
</tr>
</tbody></table>

<h3 id="per-type-arguments">Per type arguments</h3>

<p>Each type of feed item supports customisation with a specific list of <code class="prettyprint">params</code>. Currently we only support creation of the <code class="prettyprint">basic</code> feed item which requires the parameters below. These should be sent as form parameters as in the example to the right.</p>

<h5 id="basic">Basic</h5>

<p>The basic type displays an <code class="prettyprint">image</code>, with <code class="prettyprint">title</code> text and optional <code class="prettyprint">body</code> text.
<br/><em>Note the image supports animated gifs!</em></p>

<p><img src="images/nyanfeed-93ee2ecb.gif" /></p>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">title</code><br><span class="label notice">Required</span></td>
<td>The title to display.</td>
</tr>
<tr>
<td><code class="prettyprint">image_url</code><br><span class="label notice">Required</span></td>
<td>URL of the image to display. This will be displayed as an icon in the feed, and on the expanded page if no <code class="prettyprint">url</code> has been provided.</td>
</tr>
<tr>
<td><code class="prettyprint">body</code><br><span class="label">Optional</span></td>
<td>The body text of the feed item.</td>
</tr>
<tr>
<td><code class="prettyprint">background_color</code><br><span class="label">Optional</span></td>
<td>Hex value for the background colour of the feed item. Defaults to to standard app colours (ie. white background).</td>
</tr>
<tr>
<td><code class="prettyprint">title_color</code><br><span class="label">Optional</span></td>
<td>Hex value for the colour of the title text. Defaults to standard app colours.</td>
</tr>
<tr>
<td><code class="prettyprint">body_color</code><br><span class="label">Optional</span></td>
<td>Hex value for the colour of the body text. Defaults to standard app colours.</td>
</tr>
</tbody></table>

          <h1 id="webhooks">Webhooks</h1>

<p>Webhooks allow your application to receive real-time, push notification of events in an account.</p>

<h2 id="registering-a-webhook">Registering a webhook</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/webhooks"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"account_id=</span><span class="nv">$account_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"url=</span><span class="nv">$url</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"webhook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account_id"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook_id"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each time a matching event occurs, we will make a POST call to the URL you provide. If the call fails, we will retry up to a maximum of 5 attempts, with exponential backoff.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">account_id</code><br><span class="label notice">Required</span></td>
<td>The account to receive notifications for.</td>
</tr>
<tr>
<td><code class="prettyprint">url</code><br><span class="label notice">Required</span></td>
<td>The URL we will send notifications to.</td>
</tr>
</tbody></table>

<h2 id="list-webhooks">List webhooks</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http <span class="s2">"https://api.getmondo.co.uk/webhooks?account_id=</span><span class="nv">$account_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"webhooks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acc_000091yf79yMwNaZHhHGzp"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook_000091yhhOmrXQaVZ1Irsv"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/callback"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acc_000091yf79yMwNaZHhHGzp"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webhook_000091yhhzvJSxLYGAceC9"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example2.com/anothercallback"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>List the webhooks your application has registered on an account.</p>

<h5 id="arguments">Arguments</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">account_id</code><br><span class="label notice">Required</span></td>
<td>The account to list registered webhooks for.</td>
</tr>
</tbody></table>

<h2 id="deleting-a-webhook">Deleting a webhook</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>http DELETE <span class="s2">"https://api.getmondo.co.uk/webhooks/</span><span class="nv">$webhook_id</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{}</span><span class="w">
</span></code></pre>

<p>When you delete a webhook, we will no longer send notifications to it.</p>

<h2 id="transaction-created">Transaction created</h2>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction.created"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"account_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acc_00008gju41AHyfLUzBUk8A"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-350</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-04T14:28:40Z"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ozone Coffee Roasters"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zjky19HyFLAzlUk7t"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"is_load"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"settled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98 Southgate Road"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GB"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.54151</span><span class="p">,</span><span class="w">
                </span><span class="nt">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.08482400000002599</span><span class="p">,</span><span class="w">
                </span><span class="nt">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N1 3JD"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Greater London"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-22T12:20:18Z"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"group_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grp_00008zIcpbBOaAr7TTP3sv"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"merch_00008zIcpbAKe8shBxXUtl"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pbs.twimg.com/profile_images/527043602623389696/68_SgUWJ.jpeg"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"emoji"</span><span class="p">:</span><span class="w"> </span><span class="s2">"üçû"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The De Beauvoir Deli Co."</span><span class="p">,</span><span class="w">
            </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eating_out"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each time a new transaction is created in a user&rsquo;s account, we will immediately send information about it in a <code class="prettyprint">transaction.created</code> event.</p>

          <h1 id="attachments">Attachments</h1>

<p>Images (eg. receipts) can be attached to transactions by uploading these via the <code class="prettyprint">attachment</code> API. Once an attachment is <em>registered</em> against a transaction, the image will be shown in the transaction detail screen within the Mondo app.</p>

<p>There are two options for attaching images to transactions - either Mondo can host the image, or remote images can be displayed.</p>

<p>If Mondo is hosting the attachment the upload process consists of three steps:</p>

<ol>
<li>Obtain a temporary authorised URL to <a href="#upload-attachment">upload</a> the attachment to.</li>
<li>Upload the file to this URL.</li>
<li><a href="#register-attachment">Register</a> the attachment against a <code class="prettyprint">transaction</code>.</li>
</ol>

<p>If you are hosting the attachment, you can simply register the attachment with the transaction:</p>

<ol>
<li><a href="#register-attachment">Register</a> the attachment against a <code class="prettyprint">transaction</code>.</li>
</ol>

<h2 id="upload-attachment">Upload attachment</h2>

<p>The first step when uploading an attachment is to obtain a temporary URL to which the file can be uploaded. The response will include a <code class="prettyprint">file_url</code> which will be the URL of the resulting file, and an <code class="prettyprint">upload_url</code> to which the file should be uploaded to.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/attachment/upload"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"file_name=foo.png"</span> <span class="se">\</span>
    <span class="s2">"file_type=image/png"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"file_url"</span><span class="p">:</span><span class="s2">"https://s3-eu-west-1.amazonaws.com/mondo-image-uploads/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"upload_url"</span><span class="p">:</span><span class="s2">"https://mondo-image-uploads.s3.amazonaws.com/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png?AWSAccessKeyId=AKIAIR3IFH6UCTCXB5PQ\u0026Expires=1447353431\u0026Signature=k2QeDCCQQHaZeynzYKckejqXRGU%!D(MISSING)"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h5 id="request-parameters">Request Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">file_name</code><br><span class="label">Required</span></td>
<td>The name of the file to be uploaded</td>
</tr>
<tr>
<td><code class="prettyprint">file_type</code><br><span class="label">Required</span></td>
<td>The content type of the file</td>
</tr>
</tbody></table>

<h5 id="response-parameters">Response Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">file_url</code></td>
<td>The URL of the file once it has been uploaded</td>
</tr>
<tr>
<td><code class="prettyprint">upload_url</code></td>
<td>The URL to <code class="prettyprint">POST</code> the file to when uploading</td>
</tr>
</tbody></table>

<h2 id="register-attachment">Register attachment</h2>

<p>Once you have obtained a URL for an attachment, either by uploading to the <code class="prettyprint">upload_url</code> obtained from the <code class="prettyprint">upload</code> endpoint above or by hosting a remote image, this URL can then be registered against a transaction. Once an attachment is registered against a transaction this will be displayed on the detail page of a transaction within the Mondo app.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/attachment/register"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"external_id=tx_00008zIcpb1TB4yeIFXMzx"</span> <span class="se">\</span>
    <span class="s2">"file_type=image/png"</span> <span class="se">\</span>
    <span class="s2">"file_url=https://s3-eu-west-1.amazonaws.com/mondo-image-uploads/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"attachment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attach_00009238aOAIvVqfb9LrZh"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_00009238aMBIIrS5Rdncq9"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tx_00008zIcpb1TB4yeIFXMzx"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"file_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3-eu-west-1.amazonaws.com/mondo-image-uploads/user_00009237hliZellUicKuG1/LcCu4ogv1xW28OCcvOTL-foo.png"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"file_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-11-12T18:37:02Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h5 id="request-parameters">Request Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">external_id</code><br><span class="label">Required</span></td>
<td>The id of the <code class="prettyprint">transaction</code> to associate the <code class="prettyprint">attachment</code> with.</td>
</tr>
<tr>
<td><code class="prettyprint">file_url</code><br><span class="label">Required</span></td>
<td>The URL of the uploaded attachment.</td>
</tr>
<tr>
<td><code class="prettyprint">file_type</code><br><span class="label">Required</span></td>
<td>The content type of the attachment.</td>
</tr>
</tbody></table>

<h5 id="response-parameters">Response Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td>The ID of the attachment. This can be used to deregister at a later date.</td>
</tr>
<tr>
<td><code class="prettyprint">user_id</code></td>
<td>The id of the <code class="prettyprint">user</code> who owns this <code class="prettyprint">attachment</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">external_id</code></td>
<td>The id of the <code class="prettyprint">transaction</code> to which the <code class="prettyprint">attachment</code> is attached.</td>
</tr>
<tr>
<td><code class="prettyprint">file_url</code></td>
<td>The URL at which the <code class="prettyprint">attachment</code> is available.</td>
</tr>
<tr>
<td><code class="prettyprint">file_type</code></td>
<td>The file type of the <code class="prettyprint">attachment</code>.</td>
</tr>
<tr>
<td><code class="prettyprint">created</code></td>
<td>The timestamp <em>in UTC</em> when the attachment was created.</td>
</tr>
</tbody></table>

<h2 id="deregister-attachment">Deregister attachment</h2>

<p>To remove an <code class="prettyprint">attachment</code>, simply deregister this using its <code class="prettyprint">id</code></p>
<pre class="highlight shell"><code><span class="gp">$ </span>http --form POST <span class="s2">"https://api.getmondo.co.uk/attachment/deregister"</span> <span class="se">\</span>
    <span class="s2">"Authorization: Bearer </span><span class="nv">$access_token</span><span class="s2">"</span> <span class="se">\</span>
    <span class="s2">"id=attach_00009238aOAIvVqfb9LrZh"</span>
</code></pre>
<pre class="highlight json"><code><span class="p">{}</span><span class="w">
</span></code></pre>

<h5 id="request-parameters">Request Parameters</h5>

<table><thead>
<tr>
<th><span class="hide">Parameter</span></th>
<th><span class="hide">Description</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code><br><span class="label">Required</span></td>
<td>The id of the <code class="prettyprint">attachment</code> to deregister.</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>The Mondo API uses conventional HTTP response codes to indicate errors, and includes more detailed information on the exact nature of an error in the HTTP response.</p>

<h5 id="http-response-codes">HTTP response codes</h5>

<table><thead>
<tr>
<th><span class="hide">Response code</span></th>
<th><span class="hide">Meaning</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">200</code><br>OK</td>
<td>All is well.</td>
</tr>
<tr>
<td><code class="prettyprint">400</code><br>Bad Request</td>
<td>Your request has missing parameters or is malformed.</td>
</tr>
<tr>
<td><code class="prettyprint">401</code><br>Unauthorized</td>
<td>Your request is not authenticated.</td>
</tr>
<tr>
<td><code class="prettyprint">403</code><br>Forbidden</td>
<td>Your request is authenticated but has insufficient permissions.</td>
</tr>
<tr>
<td><code class="prettyprint">405</code><br>Method Not Allowed</td>
<td>You are using the incorrect HTTP verb. Double check whether it should be POST/GET/DELETE/etc.</td>
</tr>
<tr>
<td><code class="prettyprint">404</code><br>Page Not Found</td>
<td>The endpoint requested does not exist.</td>
</tr>
<tr>
<td><code class="prettyprint">406</code><br>Not Acceptable</td>
<td>Your application does not accept the content format returned according to the Accept headers sent in the request.</td>
</tr>
<tr>
<td><code class="prettyprint">429</code><br>Too Many Requests</td>
<td>Your application is exceeding its rate limit. Back off, buddy. :p</td>
</tr>
<tr>
<td><code class="prettyprint">500</code><br>Internal Server Error</td>
<td>Something is wrong on our end. Whoopsie.</td>
</tr>
<tr>
<td><code class="prettyprint">504</code><br>Gateway Timeout</td>
<td>Something has timed out on our end. Whoopsie.</td>
</tr>
</tbody></table>

<h3 id="authentication-errors">Authentication errors</h3>

<p>Errors pertaining to authentication are standard errors but also contain extra information to follow the OAuth specification. Specifically, they contain the <code class="prettyprint">error</code> key with the following values:</p>

<h5 id="error-values"><code class="prettyprint">error</code> values</h5>

<table><thead>
<tr>
<th><span class="hide">Value</span></th>
<th><span class="hide">Meaning</span></th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">invalid_token</code></td>
<td>The supplied access token is invalid or has expired.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
    <!-- Google Analytics -->
    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-63104269-1');ga('send','pageview');
    </script>
  </body>
</html>
